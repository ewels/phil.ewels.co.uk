---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { Icon } from "astro-icon";

const workplaces = (await Astro.glob("./work/*.{md,mdx}")).sort(
  (a, b) => new Date(b.frontmatter.startDate).valueOf() - new Date(a.frontmatter.startDate).valueOf()
);
const projects = (await Astro.glob("./projects/*.{md,mdx}")).sort(
  (a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);
---

<BaseLayout>
  <div class="pb-3">
    <h2 class="text-6xl mb-5">Hi there!</h2>
    <p class="text-xl mb-3">I'm a bioinformatician living in Stockholm, Sweden.</p>
    <p>I work with high-throughput genomics data and open-source software.</p>
  </div>
  <div class="pb-12 mt-2">
    <a
      href="https://github.com/ewels/"
      target="_blank"
      class="btn btn-ghost border-neutral btn-sm gap-2 mr-1 normal-case"
      aria-label="GitHub"
    >
      <Icon name="mdi:github" size="18px" /> GitHub
    </a>
    <a
      href="http://twitter.com/tallphil"
      target="_blank"
      class="btn btn-ghost border-neutral btn-sm gap-2 mr-1 normal-case"
      aria-label="twitter"
    >
      <Icon name="mdi:twitter" size="18px" /> Twitter
    </a>
    <a
      href="http://uk.linkedin.com/in/philewels"
      target="_blank"
      class="btn btn-ghost border-neutral btn-sm gap-2 mr-1 normal-case"
      aria-label="LinkedIn"
    >
      <Icon name="mdi:linkedin" size="18px" /> LinkedIn
    </a>
    <a
      href="http://orcid.org/0000-0003-4101-2502"
      target="_blank"
      class="btn btn-ghost border-neutral btn-sm gap-2 mr-1 normal-case"
      aria-label="ORCiD"
    >
      <Icon name="simple-icons:orcid" size="18px" /> ORCiD
    </a>
    <a
      href="https://scholar.google.se/citations?user=KJt8R0kAAAAJ&view_op=list_works&sortby=pubdate"
      target="_blank"
      class="btn btn-ghost border-neutral btn-sm gap-2 mr-1 normal-case"
      aria-label="Google Scholar"
    >
      <Icon name="simple-icons:googlescholar" size="18px" /> Google Scholar
    </a>
    <a
      href="http://www.researchgate.net/profile/Philip_Ewels"
      target="_blank"
      class="btn btn-ghost border-neutral btn-sm gap-2 mr-1 normal-case"
      aria-label="Research Gate"
    >
      <Icon name="simple-icons:researchgate" size="18px" /> Research Gate
    </a>
  </div>

  <div class="pb-12 mt-5">
    <h2 class="text-4xl mb-5">Where I've worked</h2>
    <p class="text-xl mb-3">I'm a molecular biologist, turned bioinformatician, turned research-software engineer.</p>
    <p class="mb-5">
      I began my career working with research in epigenetics, notably 3D nuclear structure and DNA methylation. I later
      started working with infrastructure and development of open-source bioinformatics tools. These are the places I
      have worked - click to find out more about the positions.
    </p>
    {
      workplaces.map((post) => (
        <>
          <HorizontalCard
            title={post.frontmatter.title}
            img={post.frontmatter.iconImage}
            desc={post.frontmatter.description}
            descImage={post.frontmatter.descImage}
            tags={post.frontmatter.tags}
            url={post.url}
          />
        </>
      ))
    }
  </div>

  <div class="mt-12">
    <h2 class="text-4xl mb-5">Projects</h2>

    {
      projects.map((post) => (
        <>
          <HorizontalCard
            title={post.frontmatter.title}
            img={post.frontmatter.iconImage}
            desc={post.frontmatter.description}
            url={post.url}
          />
        </>
      ))
    }
  </div>
</BaseLayout>
